<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - NottedTips</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="nav-logo">‚öΩ</span>
                <span class="nav-title">NottedTips Admin</span>
            </div>
            
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="tips-free.html" class="nav-link">Free Tips</a>
                <a href="tips-premium.html" class="nav-link">Premium Tips</a>
                <div class="nav-auth" id="navAuth">
                    <button class="btn btn-outline" onclick="auth.logout()">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Admin Dashboard -->
    <div class="admin-only">
        <!-- Header -->
        <section class="admin-header">
            <div class="container">
                <div class="header-content">
                    <h1 class="page-title">
                        <span class="admin-icon">‚öôÔ∏è</span>
                        Admin Dashboard
                    </h1>
                    <p class="page-subtitle">
                        Manage tips, users, and monitor platform performance
                    </p>
                </div>
            </div>
        </section>

        <!-- Dashboard Stats -->
        <section class="dashboard-stats">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalTipsCount">--</div>
                            <div class="stat-label">Total Tips</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalUsersCount">--</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üíé</div>
                        <div class="stat-info">
                            <div class="stat-number" id="premiumUsersCount">--</div>
                            <div class="stat-label">Premium Users</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-info">
                            <div class="stat-number" id="winRatePercent">--</div>
                            <div class="stat-label">Win Rate</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Tabs -->
        <section class="admin-content">
            <div class="container">
                <div class="admin-tabs">
                    <button class="tab-button active" onclick="switchTab('tips')">Manage Tips</button>
                    <button class="tab-button" onclick="switchTab('users')">Manage Users</button>
                    <button class="tab-button" onclick="switchTab('analytics')">Analytics</button>
                </div>

                <!-- Tips Management Tab -->
                <div id="tipsTab" class="tab-content active">
                    <div class="admin-section">
                        <div class="section-header">
                            <h2>Tips Management</h2>
                            <button class="btn btn-primary" onclick="openAddTipModal()">Add New Tip</button>
                        </div>

                        <div class="tips-filters">
                            <select id="adminTipFilter" class="filter-select" onchange="filterAdminTips()">
                                <option value="all">All Tips</option>
                                <option value="pending">Pending</option>
                                <option value="won">Won</option>
                                <option value="lost">Lost</option>
                            </select>
                            <select id="adminTypeFilter" class="filter-select" onchange="filterAdminTips()">
                                <option value="all">All Types</option>
                                <option value="free">Free Only</option>
                                <option value="premium">Premium Only</option>
                            </select>
                        </div>

                        <div class="admin-tips-container" id="adminTipsContainer">
                            <!-- Tips will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Users Management Tab -->
                <div id="usersTab" class="tab-content">
                    <div class="admin-section">
                        <div class="section-header">
                            <h2>Users Management</h2>
                            <div class="user-stats">
                                <span class="user-stat">Free: <strong id="freeUsersCount">--</strong></span>
                                <span class="user-stat">Premium: <strong id="premiumUsersCountDetail">--</strong></span>
                            </div>
                        </div>

                        <div class="users-container" id="usersContainer">
                            <!-- Users will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div id="analyticsTab" class="tab-content">
                    <div class="admin-section">
                        <div class="section-header">
                            <h2>Platform Analytics</h2>
                        </div>

                        <div class="analytics-grid">
                            <div class="analytics-card">
                                <h3>Performance Overview</h3>
                                <div class="analytics-stats">
                                    <div class="analytics-stat">
                                        <span class="label">Total Bets Placed</span>
                                        <span class="value">1,247</span>
                                    </div>
                                    <div class="analytics-stat">
                                        <span class="label">Average Odds</span>
                                        <span class="value">2.15</span>
                                    </div>
                                    <div class="analytics-stat">
                                        <span class="label">Monthly Revenue</span>
                                        <span class="value">$2,890</span>
                                    </div>
                                </div>
                            </div>

                            <div class="analytics-card">
                                <h3>Popular Leagues</h3>
                                <div class="league-stats">
                                    <div class="league-stat">
                                        <span class="league-name">Premier League</span>
                                        <span class="league-percentage">35%</span>
                                    </div>
                                    <div class="league-stat">
                                        <span class="league-name">La Liga</span>
                                        <span class="league-percentage">28%</span>
                                    </div>
                                    <div class="league-stat">
                                        <span class="league-name">Serie A</span>
                                        <span class="league-percentage">20%</span>
                                    </div>
                                    <div class="league-stat">
                                        <span class="league-name">Bundesliga</span>
                                        <span class="league-percentage">17%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Add Tip Modal -->
    <div id="addTipModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Add New Tip</h3>
                <span class="modal-close" onclick="closeModal('addTipModal')">&times;</span>
            </div>
            <form id="addTipForm" class="tip-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="tipTitle">Tip Title</label>
                        <input type="text" id="tipTitle" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="tipLeague">League</label>
                        <select id="tipLeague" name="league" required>
                            <option value="">Select League</option>
                            <option value="Premier League">Premier League</option>
                            <option value="La Liga">La Liga</option>
                            <option value="Serie A">Serie A</option>
                            <option value="Bundesliga">Bundesliga</option>
                            <option value="Ligue 1">Ligue 1</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tipMatch">Match</label>
                    <input type="text" id="tipMatch" name="match" placeholder="Team A vs Team B" required>
                </div>
                
                <div class="form-group">
                    <label for="tipPrediction">Prediction</label>
                    <input type="text" id="tipPrediction" name="prediction" placeholder="e.g., Over 2.5 Goals" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="tipOdds">Odds</label>
                        <input type="number" id="tipOdds" name="odds" step="0.01" min="1" required>
                    </div>
                    <div class="form-group">
                        <label for="tipConfidence">Confidence (%)</label>
                        <input type="number" id="tipConfidence" name="confidence" min="1" max="100" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="tipDate">Date</label>
                        <input type="date" id="tipDate" name="date" required>
                    </div>
                    <div class="form-group">
                        <label for="tipTime">Time</label>
                        <input type="time" id="tipTime" name="time" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tipAnalysis">Analysis</label>
                    <textarea id="tipAnalysis" name="analysis" rows="4" placeholder="Detailed analysis and reasoning..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="tipIsPremium" name="isPremium">
                        <span class="checkmark"></span>
                        Premium Tip
                    </label>
                </div>
                
                <button type="submit" class="btn btn-primary btn-full">Add Tip</button>
            </form>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/tips.js"></script>
    <script src="js/main.js"></script>
    
    <style>
        /* Admin specific styles */
        .admin-header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 2rem 0;
        }
        
        .admin-icon {
            color: var(--accent-primary);
            font-size: 2rem;
        }
        
        .dashboard-stats {
            padding: 2rem 0;
            background: var(--bg-primary);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .stat-icon {
            font-size: 2rem;
            opacity: 0.8;
        }
        
        .stat-info {
            flex: 1;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-primary);
            display: block;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .admin-content {
            padding: 2rem 0;
        }
        
        .admin-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border);
        }
        
        .tab-button {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }
        
        .tab-button.active {
            color: var(--text-primary);
            border-bottom-color: var(--accent-primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .admin-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 2rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .tips-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .admin-tips-container {
            display: grid;
            gap: 1rem;
        }
        
        .admin-tip-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        
        .tip-info h4 {
            margin-bottom: 0.5rem;
        }
        
        .tip-info p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }
        
        .tip-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: hsl(0, 84%, 50%);
        }
        
        .users-container {
            display: grid;
            gap: 1rem;
        }
        
        .user-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        
        .user-info h4 {
            margin-bottom: 0.25rem;
        }
        
        .user-info p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }
        
        .user-badges {
            display: flex;
            gap: 0.5rem;
        }
        
        .free-badge {
            background: var(--bg-primary);
            color: var(--text-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
        }
        
        .admin-badge {
            background: var(--danger);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
        }
        
        .user-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .user-stats {
            display: flex;
            gap: 2rem;
            color: var(--text-secondary);
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .analytics-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 2rem;
        }
        
        .analytics-card h3 {
            margin-bottom: 1.5rem;
            color: var(--accent-primary);
        }
        
        .analytics-stats {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .analytics-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .analytics-stat .label {
            color: var(--text-secondary);
        }
        
        .analytics-stat .value {
            font-weight: 600;
            color: var(--accent-primary);
        }
        
        .league-stats {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .league-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .league-name {
            color: var(--text-secondary);
        }
        
        .league-percentage {
            font-weight: 600;
            color: var(--accent-primary);
        }
        
        .modal-large {
            max-width: 600px;
        }
        
        .tip-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 1rem;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }
        
        .checkbox-label input[type="checkbox"] {
            width: auto;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .admin-tip-card,
            .user-card {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .tip-actions,
            .user-actions {
                width: 100%;
                justify-content: flex-start;
            }
        }
    </style>
    
    <script>
        // Admin-specific JavaScript
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
            
            // Load tab-specific content
            if (tabName === 'tips') {
                loadAdminTips();
            } else if (tabName === 'users') {
                loadUserManagement();
            }
        }
        
        function openAddTipModal() {
            auth.openModal('addTipModal');
        }
        
        function filterAdminTips() {
            // Implement filtering logic
            loadAdminTips();
        }
        
        // Initialize admin dashboard on page load
        document.addEventListener('DOMContentLoaded', function() {
            if (auth.isAdmin()) {
                loadAdminStats();
                loadAdminTips();
            }
        });
        
        function loadAdminStats() {
            const stats = tipsManager.getStats();
            document.getElementById('totalTipsCount').textContent = stats.total;
            document.getElementById('winRatePercent').textContent = stats.winRate + '%';
            
            // Mock user stats
            document.getElementById('totalUsersCount').textContent = '156';
            document.getElementById('premiumUsersCount').textContent = '43';
            document.getElementById('freeUsersCount').textContent = '113';
            document.getElementById('premiumUsersCountDetail').textContent = '43';
        }
    </script>
</body>
</html>